{
 "Description": "Hivemind-Prism Compute Infrastructure - ECS, Fargate, and Lambda",
 "Resources": {
  "ArchaeologistTaskRole8B61F93D": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "ECS task role for Archaeologist agent: Context discovery and metadata extraction",
    "RoleName": "HivemindArchaeologistTaskRole"
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/ArchaeologistTaskRole/Resource"
   }
  },
  "ArchaeologistTaskRoleDefaultPolicy2650B1AE": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream",
        "kendra:Query",
        "kendra:Retrieve",
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "secretsmanager:GetSecretValue",
       "Effect": "Allow",
       "Resource": "arn:aws:secretsmanager:us-west-2:909507831547:secret:hivemind/*"
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttKendraBucket8BF62693Arn114FE289"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttKendraBucket8BF62693Arn114FE289"
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "HivemindPrism-Security:ExportsOutputFnGetAttHivemindKeyB4006B32ArnC7048005"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/agent-outputs/archaeologist/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttFindingsArchiveTable557F1EE3Arn6A182E86"
        },
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttMissionStatusTable4039F7D7ArnEFD2A9B1"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttFindingsArchiveTable557F1EE3Arn6A182E86"
           },
           "/index/*"
          ]
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttToolResultsTable82CE91FEArnDA855BED"
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ArchaeologistTaskRoleDefaultPolicy2650B1AE",
    "Roles": [
     {
      "Ref": "ArchaeologistTaskRole8B61F93D"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/ArchaeologistTaskRole/DefaultPolicy/Resource"
   }
  },
  "StrategistTaskRole541CBCB4": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "ECS task role for Strategist agent: Planning and tool selection",
    "RoleName": "HivemindStrategistTaskRole"
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/StrategistTaskRole/Resource"
   }
  },
  "StrategistTaskRoleDefaultPolicyBEA49F05": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream",
        "kendra:Query",
        "kendra:Retrieve",
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "secretsmanager:GetSecretValue",
       "Effect": "Allow",
       "Resource": "arn:aws:secretsmanager:us-west-2:909507831547:secret:hivemind/*"
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttKendraBucket8BF62693Arn114FE289"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttKendraBucket8BF62693Arn114FE289"
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "HivemindPrism-Security:ExportsOutputFnGetAttHivemindKeyB4006B32ArnC7048005"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/agent-outputs/strategist/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttFindingsArchiveTable557F1EE3Arn6A182E86"
        },
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttMissionStatusTable4039F7D7ArnEFD2A9B1"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttFindingsArchiveTable557F1EE3Arn6A182E86"
           },
           "/index/*"
          ]
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttToolResultsTable82CE91FEArnDA855BED"
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "StrategistTaskRoleDefaultPolicyBEA49F05",
    "Roles": [
     {
      "Ref": "StrategistTaskRole541CBCB4"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/StrategistTaskRole/DefaultPolicy/Resource"
   }
  },
  "CoordinatorTaskRole9462B0FA": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "ECS task role for Coordinator agent: Resource allocation and scheduling",
    "RoleName": "HivemindCoordinatorTaskRole"
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/CoordinatorTaskRole/Resource"
   }
  },
  "CoordinatorTaskRoleDefaultPolicy09F64788": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream",
        "kendra:Query",
        "kendra:Retrieve",
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "secretsmanager:GetSecretValue",
       "Effect": "Allow",
       "Resource": "arn:aws:secretsmanager:us-west-2:909507831547:secret:hivemind/*"
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttKendraBucket8BF62693Arn114FE289"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttKendraBucket8BF62693Arn114FE289"
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "HivemindPrism-Security:ExportsOutputFnGetAttHivemindKeyB4006B32ArnC7048005"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/agent-outputs/coordinator/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttFindingsArchiveTable557F1EE3Arn6A182E86"
        },
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttMissionStatusTable4039F7D7ArnEFD2A9B1"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttFindingsArchiveTable557F1EE3Arn6A182E86"
           },
           "/index/*"
          ]
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttToolResultsTable82CE91FEArnDA855BED"
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CoordinatorTaskRoleDefaultPolicy09F64788",
    "Roles": [
     {
      "Ref": "CoordinatorTaskRole9462B0FA"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/CoordinatorTaskRole/DefaultPolicy/Resource"
   }
  },
  "SynthesizerTaskRole69378926": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "ECS task role for Synthesizer agent: Finding generation from tool results",
    "RoleName": "HivemindSynthesizerTaskRole"
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/SynthesizerTaskRole/Resource"
   }
  },
  "SynthesizerTaskRoleDefaultPolicy8C34C861": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream",
        "kendra:Query",
        "kendra:Retrieve",
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "secretsmanager:GetSecretValue",
       "Effect": "Allow",
       "Resource": "arn:aws:secretsmanager:us-west-2:909507831547:secret:hivemind/*"
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttKendraBucket8BF62693Arn114FE289"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttKendraBucket8BF62693Arn114FE289"
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "HivemindPrism-Security:ExportsOutputFnGetAttHivemindKeyB4006B32ArnC7048005"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/agent-outputs/synthesizer/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttFindingsArchiveTable557F1EE3Arn6A182E86"
        },
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttMissionStatusTable4039F7D7ArnEFD2A9B1"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttFindingsArchiveTable557F1EE3Arn6A182E86"
           },
           "/index/*"
          ]
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttToolResultsTable82CE91FEArnDA855BED"
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "SynthesizerTaskRoleDefaultPolicy8C34C861",
    "Roles": [
     {
      "Ref": "SynthesizerTaskRole69378926"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/SynthesizerTaskRole/DefaultPolicy/Resource"
   }
  },
  "CriticTaskRoleCAC1AFB2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "ECS task role for Critic agent: Finding validation and challenge",
    "RoleName": "HivemindCriticTaskRole"
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/CriticTaskRole/Resource"
   }
  },
  "CriticTaskRoleDefaultPolicy280285C1": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream",
        "kendra:Query",
        "kendra:Retrieve",
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "secretsmanager:GetSecretValue",
       "Effect": "Allow",
       "Resource": "arn:aws:secretsmanager:us-west-2:909507831547:secret:hivemind/*"
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttKendraBucket8BF62693Arn114FE289"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttKendraBucket8BF62693Arn114FE289"
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "HivemindPrism-Security:ExportsOutputFnGetAttHivemindKeyB4006B32ArnC7048005"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/agent-outputs/critic/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttFindingsArchiveTable557F1EE3Arn6A182E86"
        },
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttMissionStatusTable4039F7D7ArnEFD2A9B1"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttFindingsArchiveTable557F1EE3Arn6A182E86"
           },
           "/index/*"
          ]
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttToolResultsTable82CE91FEArnDA855BED"
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CriticTaskRoleDefaultPolicy280285C1",
    "Roles": [
     {
      "Ref": "CriticTaskRoleCAC1AFB2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/CriticTaskRole/DefaultPolicy/Resource"
   }
  },
  "ArchivistTaskRoleEE36BB64": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "ECS task role for Archivist agent: Final storage and memory formation",
    "RoleName": "HivemindArchivistTaskRole"
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/ArchivistTaskRole/Resource"
   }
  },
  "ArchivistTaskRoleDefaultPolicy9BFAD426": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream",
        "kendra:Query",
        "kendra:Retrieve",
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "secretsmanager:GetSecretValue",
       "Effect": "Allow",
       "Resource": "arn:aws:secretsmanager:us-west-2:909507831547:secret:hivemind/*"
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttKendraBucket8BF62693Arn114FE289"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttKendraBucket8BF62693Arn114FE289"
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "HivemindPrism-Security:ExportsOutputFnGetAttHivemindKeyB4006B32ArnC7048005"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/agent-outputs/archivist/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttFindingsArchiveTable557F1EE3Arn6A182E86"
        },
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttMissionStatusTable4039F7D7ArnEFD2A9B1"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttFindingsArchiveTable557F1EE3Arn6A182E86"
           },
           "/index/*"
          ]
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttToolResultsTable82CE91FEArnDA855BED"
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ArchivistTaskRoleDefaultPolicy9BFAD426",
    "Roles": [
     {
      "Ref": "ArchivistTaskRoleEE36BB64"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/ArchivistTaskRole/DefaultPolicy/Resource"
   }
  },
  "McpServerTaskRoleB19E5A08": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "Role for MCP tool server tasks (code scanning + AWS security auditing)",
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/SecurityAudit"
       ]
      ]
     }
    ],
    "RoleName": "HivemindMcpServerTaskRole"
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/McpServerTaskRole/Resource"
   }
  },
  "McpServerTaskRoleDefaultPolicy8E624EA6": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cloudtrail:GetEventSelectors",
        "cloudtrail:GetTrailStatus",
        "cloudtrail:ListTags",
        "config:DescribeConfigurationRecorderStatus",
        "config:DescribeConfigurationRecorders",
        "ec2:DescribeImages",
        "ec2:DescribeSnapshotAttribute",
        "ec2:DescribeSnapshots",
        "iam:GetAccountPasswordPolicy",
        "iam:GetAccountSummary",
        "iam:ListAccessKeys",
        "iam:ListMFADevices",
        "iam:ListVirtualMFADevices",
        "lambda:GetFunction",
        "lambda:GetFunctionConfiguration",
        "lambda:GetPolicy",
        "s3:GetAccountPublicAccessBlock",
        "s3:GetBucketPolicyStatus",
        "s3:GetBucketPublicAccessBlock"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "secretsmanager:GetSecretValue",
       "Effect": "Allow",
       "Resource": "arn:aws:secretsmanager:us-west-2:909507831547:secret:hivemind/aws-scan-credentials-*"
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/unzipped/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "HivemindPrism-Security:ExportsOutputFnGetAttHivemindKeyB4006B32ArnC7048005"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/tool-results/gitleaks-mcp/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/tool-results/pacu-mcp/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/tool-results/scoutsuite-mcp/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/tool-results/semgrep-mcp/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/tool-results/trivy-mcp/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttToolResultsTable82CE91FEArnDA855BED"
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "McpServerTaskRoleDefaultPolicy8E624EA6",
    "Roles": [
     {
      "Ref": "McpServerTaskRoleB19E5A08"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/McpServerTaskRole/DefaultPolicy/Resource"
   }
  },
  "UnpackLambdaRoleCC4ECDC5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "Lambda execution role: Unpack and validate uploaded code",
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "RoleName": "HivemindUnpackLambdaRole"
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/UnpackLambdaRole/Resource"
   }
  },
  "UnpackLambdaRoleDefaultPolicy1DBA011B": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "HivemindPrism-Security:ExportsOutputFnGetAttHivemindKeyB4006B32ArnC7048005"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttMissionStatusTable4039F7D7ArnEFD2A9B1"
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "UnpackLambdaRoleDefaultPolicy1DBA011B",
    "Roles": [
     {
      "Ref": "UnpackLambdaRoleCC4ECDC5"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/UnpackLambdaRole/DefaultPolicy/Resource"
   }
  },
  "MemoryIngestorLambdaRole2E29E0F0": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "Lambda execution role: Create Kendra memory documents",
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "RoleName": "HivemindMemoryIngestorRole"
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/MemoryIngestorLambdaRole/Resource"
   }
  },
  "MemoryIngestorLambdaRoleDefaultPolicyCF82680F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "HivemindPrism-Security:ExportsOutputFnGetAttHivemindKeyB4006B32ArnC7048005"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttFindingsArchiveTable557F1EE3Arn6A182E86"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttFindingsArchiveTable557F1EE3Arn6A182E86"
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttKendraBucket8BF62693Arn114FE289"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttKendraBucket8BF62693Arn114FE289"
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "kendra:BatchPutDocument",
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "HivemindPrism-Intelligence:ExportsOutputFnGetAttInstitutionalMemoryIndexArnF0ADD5F8"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "MemoryIngestorLambdaRoleDefaultPolicyCF82680F",
    "Roles": [
     {
      "Ref": "MemoryIngestorLambdaRole2E29E0F0"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/MemoryIngestorLambdaRole/DefaultPolicy/Resource"
   }
  },
  "FailureHandlerLambdaRole13A21A6B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "Lambda execution role: Handle mission failures",
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "RoleName": "HivemindFailureHandlerRole"
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/FailureHandlerLambdaRole/Resource"
   }
  },
  "FailureHandlerLambdaRoleDefaultPolicy85083960": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:GenerateDataKey*",
        "kms:ReEncrypt*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "HivemindPrism-Security:ExportsOutputFnGetAttHivemindKeyB4006B32ArnC7048005"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttMissionStatusTable4039F7D7ArnEFD2A9B1"
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "FailureHandlerLambdaRoleDefaultPolicy85083960",
    "Roles": [
     {
      "Ref": "FailureHandlerLambdaRole13A21A6B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/FailureHandlerLambdaRole/DefaultPolicy/Resource"
   }
  },
  "HivemindCluster94255979": {
   "Type": "AWS::ECS::Cluster",
   "Properties": {
    "ClusterName": "HivemindPrism",
    "ClusterSettings": [
     {
      "Name": "containerInsights",
      "Value": "enabled"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/HivemindCluster/Resource"
   }
  },
  "HivemindCluster54EA7101": {
   "Type": "AWS::ECS::ClusterCapacityProviderAssociations",
   "Properties": {
    "CapacityProviders": [
     "FARGATE",
     "FARGATE_SPOT"
    ],
    "Cluster": {
     "Ref": "HivemindCluster94255979"
    },
    "DefaultCapacityProviderStrategy": []
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/HivemindCluster/HivemindCluster"
   }
  },
  "archaeologistExecutionRoleE7945B2B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/archaeologistExecutionRole/Resource"
   }
  },
  "archaeologistExecutionRoleDefaultPolicyB5713F6B": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetAuthorizationToken",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:ecr:us-west-2:909507831547:repository/hivemind-archaeologist"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "archaeologistLogGroupE40905D9",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "archaeologistExecutionRoleDefaultPolicyB5713F6B",
    "Roles": [
     {
      "Ref": "archaeologistExecutionRoleE7945B2B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/archaeologistExecutionRole/DefaultPolicy/Resource"
   }
  },
  "archaeologistTaskDef0C0F4ADA": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "AWS_REGION",
        "Value": "us-west-2"
       },
       {
        "Name": "S3_ARTIFACTS_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefArtifactsBucket2AAC55442DB5E6C9"
        }
       },
       {
        "Name": "S3_KENDRA_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefKendraBucket8BF6269392D44149"
        }
       },
       {
        "Name": "DYNAMODB_MISSION_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefMissionStatusTable4039F7D7C921D396"
        }
       },
       {
        "Name": "DYNAMODB_TOOL_RESULTS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefToolResultsTable82CE91FE867ADBA2"
        }
       },
       {
        "Name": "DYNAMODB_FINDINGS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefFindingsArchiveTable557F1EE361AAD2FC"
        }
       },
       {
        "Name": "REDIS_ENDPOINT",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttRedisClusterRedisEndpointAddress2C712DA2"
        }
       },
       {
        "Name": "REDIS_PORT",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttRedisClusterRedisEndpointPortD2710AFC"
        }
       },
       {
        "Name": "KENDRA_INDEX_ID",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Intelligence:ExportsOutputFnGetAttInstitutionalMemoryIndexId7D0FD2EE"
        }
       },
       {
        "Name": "BEDROCK_MODEL_ID",
        "Value": "anthropic.claude-sonnet-4-20250514-v1:0"
       },
       {
        "Name": "AGENT_NAME",
        "Value": "archaeologist"
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Join": [
        "",
        [
         "909507831547.dkr.ecr.us-west-2.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/hivemind-archaeologist:latest"
        ]
       ]
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "archaeologistLogGroupE40905D9"
        },
        "awslogs-stream-prefix": "archaeologist",
        "awslogs-region": "us-west-2"
       }
      },
      "Name": "archaeologist-agent"
     }
    ],
    "Cpu": "1024",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "archaeologistExecutionRoleE7945B2B",
      "Arn"
     ]
    },
    "Family": "hivemind-archaeologist-agent",
    "Memory": "2048",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "ArchaeologistTaskRole8B61F93D",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/archaeologistTaskDef/Resource"
   }
  },
  "archaeologistLogGroupE40905D9": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/ecs/archaeologist-agent",
    "RetentionInDays": 7
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/archaeologistLogGroup/Resource"
   }
  },
  "strategistExecutionRole47F607FB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/strategistExecutionRole/Resource"
   }
  },
  "strategistExecutionRoleDefaultPolicy51317C07": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetAuthorizationToken",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:ecr:us-west-2:909507831547:repository/hivemind-strategist"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "strategistLogGroupEE1A63CD",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "strategistExecutionRoleDefaultPolicy51317C07",
    "Roles": [
     {
      "Ref": "strategistExecutionRole47F607FB"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/strategistExecutionRole/DefaultPolicy/Resource"
   }
  },
  "strategistTaskDef40F5F609": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "AWS_REGION",
        "Value": "us-west-2"
       },
       {
        "Name": "S3_ARTIFACTS_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefArtifactsBucket2AAC55442DB5E6C9"
        }
       },
       {
        "Name": "S3_KENDRA_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefKendraBucket8BF6269392D44149"
        }
       },
       {
        "Name": "DYNAMODB_MISSION_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefMissionStatusTable4039F7D7C921D396"
        }
       },
       {
        "Name": "DYNAMODB_TOOL_RESULTS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefToolResultsTable82CE91FE867ADBA2"
        }
       },
       {
        "Name": "DYNAMODB_FINDINGS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefFindingsArchiveTable557F1EE361AAD2FC"
        }
       },
       {
        "Name": "REDIS_ENDPOINT",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttRedisClusterRedisEndpointAddress2C712DA2"
        }
       },
       {
        "Name": "REDIS_PORT",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttRedisClusterRedisEndpointPortD2710AFC"
        }
       },
       {
        "Name": "KENDRA_INDEX_ID",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Intelligence:ExportsOutputFnGetAttInstitutionalMemoryIndexId7D0FD2EE"
        }
       },
       {
        "Name": "BEDROCK_MODEL_ID",
        "Value": "anthropic.claude-sonnet-4-20250514-v1:0"
       },
       {
        "Name": "AGENT_NAME",
        "Value": "strategist"
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Join": [
        "",
        [
         "909507831547.dkr.ecr.us-west-2.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/hivemind-strategist:latest"
        ]
       ]
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "strategistLogGroupEE1A63CD"
        },
        "awslogs-stream-prefix": "strategist",
        "awslogs-region": "us-west-2"
       }
      },
      "Name": "strategist-agent"
     }
    ],
    "Cpu": "1024",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "strategistExecutionRole47F607FB",
      "Arn"
     ]
    },
    "Family": "hivemind-strategist-agent",
    "Memory": "2048",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "StrategistTaskRole541CBCB4",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/strategistTaskDef/Resource"
   }
  },
  "strategistLogGroupEE1A63CD": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/ecs/strategist-agent",
    "RetentionInDays": 7
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/strategistLogGroup/Resource"
   }
  },
  "coordinatorExecutionRoleEBF9EEF6": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/coordinatorExecutionRole/Resource"
   }
  },
  "coordinatorExecutionRoleDefaultPolicy649DFACB": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetAuthorizationToken",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:ecr:us-west-2:909507831547:repository/hivemind-coordinator"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "coordinatorLogGroupC38D7199",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "coordinatorExecutionRoleDefaultPolicy649DFACB",
    "Roles": [
     {
      "Ref": "coordinatorExecutionRoleEBF9EEF6"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/coordinatorExecutionRole/DefaultPolicy/Resource"
   }
  },
  "coordinatorTaskDefD6FC88DD": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "AWS_REGION",
        "Value": "us-west-2"
       },
       {
        "Name": "S3_ARTIFACTS_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefArtifactsBucket2AAC55442DB5E6C9"
        }
       },
       {
        "Name": "S3_KENDRA_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefKendraBucket8BF6269392D44149"
        }
       },
       {
        "Name": "DYNAMODB_MISSION_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefMissionStatusTable4039F7D7C921D396"
        }
       },
       {
        "Name": "DYNAMODB_TOOL_RESULTS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefToolResultsTable82CE91FE867ADBA2"
        }
       },
       {
        "Name": "DYNAMODB_FINDINGS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefFindingsArchiveTable557F1EE361AAD2FC"
        }
       },
       {
        "Name": "REDIS_ENDPOINT",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttRedisClusterRedisEndpointAddress2C712DA2"
        }
       },
       {
        "Name": "REDIS_PORT",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttRedisClusterRedisEndpointPortD2710AFC"
        }
       },
       {
        "Name": "KENDRA_INDEX_ID",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Intelligence:ExportsOutputFnGetAttInstitutionalMemoryIndexId7D0FD2EE"
        }
       },
       {
        "Name": "BEDROCK_MODEL_ID",
        "Value": "anthropic.claude-sonnet-4-20250514-v1:0"
       },
       {
        "Name": "AGENT_NAME",
        "Value": "coordinator"
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Join": [
        "",
        [
         "909507831547.dkr.ecr.us-west-2.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/hivemind-coordinator:latest"
        ]
       ]
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "coordinatorLogGroupC38D7199"
        },
        "awslogs-stream-prefix": "coordinator",
        "awslogs-region": "us-west-2"
       }
      },
      "Name": "coordinator-agent"
     }
    ],
    "Cpu": "1024",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "coordinatorExecutionRoleEBF9EEF6",
      "Arn"
     ]
    },
    "Family": "hivemind-coordinator-agent",
    "Memory": "2048",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "CoordinatorTaskRole9462B0FA",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/coordinatorTaskDef/Resource"
   }
  },
  "coordinatorLogGroupC38D7199": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/ecs/coordinator-agent",
    "RetentionInDays": 7
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/coordinatorLogGroup/Resource"
   }
  },
  "synthesizerExecutionRoleCB81EBAD": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/synthesizerExecutionRole/Resource"
   }
  },
  "synthesizerExecutionRoleDefaultPolicy193A7E62": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetAuthorizationToken",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:ecr:us-west-2:909507831547:repository/hivemind-synthesizer"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "synthesizerLogGroup1B251BC4",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "synthesizerExecutionRoleDefaultPolicy193A7E62",
    "Roles": [
     {
      "Ref": "synthesizerExecutionRoleCB81EBAD"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/synthesizerExecutionRole/DefaultPolicy/Resource"
   }
  },
  "synthesizerTaskDef22D2EEBC": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "AWS_REGION",
        "Value": "us-west-2"
       },
       {
        "Name": "S3_ARTIFACTS_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefArtifactsBucket2AAC55442DB5E6C9"
        }
       },
       {
        "Name": "S3_KENDRA_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefKendraBucket8BF6269392D44149"
        }
       },
       {
        "Name": "DYNAMODB_MISSION_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefMissionStatusTable4039F7D7C921D396"
        }
       },
       {
        "Name": "DYNAMODB_TOOL_RESULTS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefToolResultsTable82CE91FE867ADBA2"
        }
       },
       {
        "Name": "DYNAMODB_FINDINGS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefFindingsArchiveTable557F1EE361AAD2FC"
        }
       },
       {
        "Name": "REDIS_ENDPOINT",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttRedisClusterRedisEndpointAddress2C712DA2"
        }
       },
       {
        "Name": "REDIS_PORT",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttRedisClusterRedisEndpointPortD2710AFC"
        }
       },
       {
        "Name": "KENDRA_INDEX_ID",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Intelligence:ExportsOutputFnGetAttInstitutionalMemoryIndexId7D0FD2EE"
        }
       },
       {
        "Name": "BEDROCK_MODEL_ID",
        "Value": "anthropic.claude-sonnet-4-20250514-v1:0"
       },
       {
        "Name": "AGENT_NAME",
        "Value": "synthesizer"
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Join": [
        "",
        [
         "909507831547.dkr.ecr.us-west-2.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/hivemind-synthesizer:latest"
        ]
       ]
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "synthesizerLogGroup1B251BC4"
        },
        "awslogs-stream-prefix": "synthesizer",
        "awslogs-region": "us-west-2"
       }
      },
      "Name": "synthesizer-agent"
     }
    ],
    "Cpu": "1024",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "synthesizerExecutionRoleCB81EBAD",
      "Arn"
     ]
    },
    "Family": "hivemind-synthesizer-agent",
    "Memory": "2048",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "SynthesizerTaskRole69378926",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/synthesizerTaskDef/Resource"
   }
  },
  "synthesizerLogGroup1B251BC4": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/ecs/synthesizer-agent",
    "RetentionInDays": 7
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/synthesizerLogGroup/Resource"
   }
  },
  "criticExecutionRole5F426FC7": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/criticExecutionRole/Resource"
   }
  },
  "criticExecutionRoleDefaultPolicy0D1D11FD": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetAuthorizationToken",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:ecr:us-west-2:909507831547:repository/hivemind-critic"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "criticLogGroup91479CCF",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "criticExecutionRoleDefaultPolicy0D1D11FD",
    "Roles": [
     {
      "Ref": "criticExecutionRole5F426FC7"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/criticExecutionRole/DefaultPolicy/Resource"
   }
  },
  "criticTaskDef3B08E328": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "AWS_REGION",
        "Value": "us-west-2"
       },
       {
        "Name": "S3_ARTIFACTS_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefArtifactsBucket2AAC55442DB5E6C9"
        }
       },
       {
        "Name": "S3_KENDRA_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefKendraBucket8BF6269392D44149"
        }
       },
       {
        "Name": "DYNAMODB_MISSION_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefMissionStatusTable4039F7D7C921D396"
        }
       },
       {
        "Name": "DYNAMODB_TOOL_RESULTS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefToolResultsTable82CE91FE867ADBA2"
        }
       },
       {
        "Name": "DYNAMODB_FINDINGS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefFindingsArchiveTable557F1EE361AAD2FC"
        }
       },
       {
        "Name": "REDIS_ENDPOINT",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttRedisClusterRedisEndpointAddress2C712DA2"
        }
       },
       {
        "Name": "REDIS_PORT",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttRedisClusterRedisEndpointPortD2710AFC"
        }
       },
       {
        "Name": "KENDRA_INDEX_ID",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Intelligence:ExportsOutputFnGetAttInstitutionalMemoryIndexId7D0FD2EE"
        }
       },
       {
        "Name": "BEDROCK_MODEL_ID",
        "Value": "anthropic.claude-sonnet-4-20250514-v1:0"
       },
       {
        "Name": "AGENT_NAME",
        "Value": "critic"
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Join": [
        "",
        [
         "909507831547.dkr.ecr.us-west-2.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/hivemind-critic:latest"
        ]
       ]
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "criticLogGroup91479CCF"
        },
        "awslogs-stream-prefix": "critic",
        "awslogs-region": "us-west-2"
       }
      },
      "Name": "critic-agent"
     }
    ],
    "Cpu": "1024",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "criticExecutionRole5F426FC7",
      "Arn"
     ]
    },
    "Family": "hivemind-critic-agent",
    "Memory": "2048",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "CriticTaskRoleCAC1AFB2",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/criticTaskDef/Resource"
   }
  },
  "criticLogGroup91479CCF": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/ecs/critic-agent",
    "RetentionInDays": 7
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/criticLogGroup/Resource"
   }
  },
  "archivistExecutionRole522CA1A4": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/archivistExecutionRole/Resource"
   }
  },
  "archivistExecutionRoleDefaultPolicy492E3059": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetAuthorizationToken",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:ecr:us-west-2:909507831547:repository/hivemind-archivist"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "archivistLogGroupFC914BE5",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "archivistExecutionRoleDefaultPolicy492E3059",
    "Roles": [
     {
      "Ref": "archivistExecutionRole522CA1A4"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/archivistExecutionRole/DefaultPolicy/Resource"
   }
  },
  "archivistTaskDef1B107691": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "AWS_REGION",
        "Value": "us-west-2"
       },
       {
        "Name": "S3_ARTIFACTS_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefArtifactsBucket2AAC55442DB5E6C9"
        }
       },
       {
        "Name": "S3_KENDRA_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefKendraBucket8BF6269392D44149"
        }
       },
       {
        "Name": "DYNAMODB_MISSION_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefMissionStatusTable4039F7D7C921D396"
        }
       },
       {
        "Name": "DYNAMODB_TOOL_RESULTS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefToolResultsTable82CE91FE867ADBA2"
        }
       },
       {
        "Name": "DYNAMODB_FINDINGS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefFindingsArchiveTable557F1EE361AAD2FC"
        }
       },
       {
        "Name": "REDIS_ENDPOINT",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttRedisClusterRedisEndpointAddress2C712DA2"
        }
       },
       {
        "Name": "REDIS_PORT",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputFnGetAttRedisClusterRedisEndpointPortD2710AFC"
        }
       },
       {
        "Name": "KENDRA_INDEX_ID",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Intelligence:ExportsOutputFnGetAttInstitutionalMemoryIndexId7D0FD2EE"
        }
       },
       {
        "Name": "BEDROCK_MODEL_ID",
        "Value": "anthropic.claude-sonnet-4-20250514-v1:0"
       },
       {
        "Name": "AGENT_NAME",
        "Value": "archivist"
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Join": [
        "",
        [
         "909507831547.dkr.ecr.us-west-2.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/hivemind-archivist:latest"
        ]
       ]
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "archivistLogGroupFC914BE5"
        },
        "awslogs-stream-prefix": "archivist",
        "awslogs-region": "us-west-2"
       }
      },
      "Name": "archivist-agent"
     }
    ],
    "Cpu": "1024",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "archivistExecutionRole522CA1A4",
      "Arn"
     ]
    },
    "Family": "hivemind-archivist-agent",
    "Memory": "2048",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "ArchivistTaskRoleEE36BB64",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/archivistTaskDef/Resource"
   }
  },
  "archivistLogGroupFC914BE5": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/ecs/archivist-agent",
    "RetentionInDays": 7
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/archivistLogGroup/Resource"
   }
  },
  "semgrepmcpExecutionRole97487FBA": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/semgrep-mcpExecutionRole/Resource"
   }
  },
  "semgrepmcpExecutionRoleDefaultPolicy04F2C78D": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetAuthorizationToken",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:ecr:us-west-2:909507831547:repository/semgrep-mcp"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "semgrepmcpLogGroupC4C639F6",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "semgrepmcpExecutionRoleDefaultPolicy04F2C78D",
    "Roles": [
     {
      "Ref": "semgrepmcpExecutionRole97487FBA"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/semgrep-mcpExecutionRole/DefaultPolicy/Resource"
   }
  },
  "semgrepmcpTaskDef4F4E8F78": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "AWS_REGION",
        "Value": "us-west-2"
       },
       {
        "Name": "S3_ARTIFACTS_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefArtifactsBucket2AAC55442DB5E6C9"
        }
       },
       {
        "Name": "DYNAMODB_TOOL_RESULTS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefToolResultsTable82CE91FE867ADBA2"
        }
       },
       {
        "Name": "TOOL_NAME",
        "Value": "semgrep-mcp"
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Join": [
        "",
        [
         "909507831547.dkr.ecr.us-west-2.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/semgrep-mcp:latest"
        ]
       ]
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "semgrepmcpLogGroupC4C639F6"
        },
        "awslogs-stream-prefix": "semgrep-mcp",
        "awslogs-region": "us-west-2"
       }
      },
      "Name": "semgrep-mcp"
     }
    ],
    "Cpu": "2048",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "semgrepmcpExecutionRole97487FBA",
      "Arn"
     ]
    },
    "Family": "hivemind-semgrep-mcp",
    "Memory": "4096",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "McpServerTaskRoleB19E5A08",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/semgrep-mcpTaskDef/Resource"
   }
  },
  "semgrepmcpLogGroupC4C639F6": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/ecs/semgrep-mcp",
    "RetentionInDays": 7
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/semgrep-mcpLogGroup/Resource"
   }
  },
  "gitleaksmcpExecutionRoleD51A8FB4": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/gitleaks-mcpExecutionRole/Resource"
   }
  },
  "gitleaksmcpExecutionRoleDefaultPolicy6739C5A9": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetAuthorizationToken",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:ecr:us-west-2:909507831547:repository/gitleaks-mcp"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "gitleaksmcpLogGroup4914FC3F",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "gitleaksmcpExecutionRoleDefaultPolicy6739C5A9",
    "Roles": [
     {
      "Ref": "gitleaksmcpExecutionRoleD51A8FB4"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/gitleaks-mcpExecutionRole/DefaultPolicy/Resource"
   }
  },
  "gitleaksmcpTaskDef7694B260": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "AWS_REGION",
        "Value": "us-west-2"
       },
       {
        "Name": "S3_ARTIFACTS_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefArtifactsBucket2AAC55442DB5E6C9"
        }
       },
       {
        "Name": "DYNAMODB_TOOL_RESULTS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefToolResultsTable82CE91FE867ADBA2"
        }
       },
       {
        "Name": "TOOL_NAME",
        "Value": "gitleaks-mcp"
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Join": [
        "",
        [
         "909507831547.dkr.ecr.us-west-2.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/gitleaks-mcp:latest"
        ]
       ]
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "gitleaksmcpLogGroup4914FC3F"
        },
        "awslogs-stream-prefix": "gitleaks-mcp",
        "awslogs-region": "us-west-2"
       }
      },
      "Name": "gitleaks-mcp"
     }
    ],
    "Cpu": "2048",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "gitleaksmcpExecutionRoleD51A8FB4",
      "Arn"
     ]
    },
    "Family": "hivemind-gitleaks-mcp",
    "Memory": "4096",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "McpServerTaskRoleB19E5A08",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/gitleaks-mcpTaskDef/Resource"
   }
  },
  "gitleaksmcpLogGroup4914FC3F": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/ecs/gitleaks-mcp",
    "RetentionInDays": 7
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/gitleaks-mcpLogGroup/Resource"
   }
  },
  "trivymcpExecutionRole6C379FEC": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/trivy-mcpExecutionRole/Resource"
   }
  },
  "trivymcpExecutionRoleDefaultPolicy229E5C52": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetAuthorizationToken",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:ecr:us-west-2:909507831547:repository/trivy-mcp"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "trivymcpLogGroupE8CDE4CC",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "trivymcpExecutionRoleDefaultPolicy229E5C52",
    "Roles": [
     {
      "Ref": "trivymcpExecutionRole6C379FEC"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/trivy-mcpExecutionRole/DefaultPolicy/Resource"
   }
  },
  "trivymcpTaskDefBB97ECFC": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "AWS_REGION",
        "Value": "us-west-2"
       },
       {
        "Name": "S3_ARTIFACTS_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefArtifactsBucket2AAC55442DB5E6C9"
        }
       },
       {
        "Name": "DYNAMODB_TOOL_RESULTS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefToolResultsTable82CE91FE867ADBA2"
        }
       },
       {
        "Name": "TOOL_NAME",
        "Value": "trivy-mcp"
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Join": [
        "",
        [
         "909507831547.dkr.ecr.us-west-2.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/trivy-mcp:latest"
        ]
       ]
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "trivymcpLogGroupE8CDE4CC"
        },
        "awslogs-stream-prefix": "trivy-mcp",
        "awslogs-region": "us-west-2"
       }
      },
      "Name": "trivy-mcp"
     }
    ],
    "Cpu": "2048",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "trivymcpExecutionRole6C379FEC",
      "Arn"
     ]
    },
    "Family": "hivemind-trivy-mcp",
    "Memory": "4096",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "McpServerTaskRoleB19E5A08",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/trivy-mcpTaskDef/Resource"
   }
  },
  "trivymcpLogGroupE8CDE4CC": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/ecs/trivy-mcp",
    "RetentionInDays": 7
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/trivy-mcpLogGroup/Resource"
   }
  },
  "scoutsuitemcpExecutionRole12A086E0": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/scoutsuite-mcpExecutionRole/Resource"
   }
  },
  "scoutsuitemcpExecutionRoleDefaultPolicyA02B2681": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetAuthorizationToken",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:ecr:us-west-2:909507831547:repository/scoutsuite-mcp"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "scoutsuitemcpLogGroupE156C9EA",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "scoutsuitemcpExecutionRoleDefaultPolicyA02B2681",
    "Roles": [
     {
      "Ref": "scoutsuitemcpExecutionRole12A086E0"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/scoutsuite-mcpExecutionRole/DefaultPolicy/Resource"
   }
  },
  "scoutsuitemcpTaskDefC2536807": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "AWS_REGION",
        "Value": "us-west-2"
       },
       {
        "Name": "S3_ARTIFACTS_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefArtifactsBucket2AAC55442DB5E6C9"
        }
       },
       {
        "Name": "DYNAMODB_TOOL_RESULTS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefToolResultsTable82CE91FE867ADBA2"
        }
       },
       {
        "Name": "TOOL_NAME",
        "Value": "scoutsuite-mcp"
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Join": [
        "",
        [
         "909507831547.dkr.ecr.us-west-2.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/scoutsuite-mcp:latest"
        ]
       ]
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "scoutsuitemcpLogGroupE156C9EA"
        },
        "awslogs-stream-prefix": "scoutsuite-mcp",
        "awslogs-region": "us-west-2"
       }
      },
      "Name": "scoutsuite-mcp"
     }
    ],
    "Cpu": "2048",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "scoutsuitemcpExecutionRole12A086E0",
      "Arn"
     ]
    },
    "Family": "hivemind-scoutsuite-mcp",
    "Memory": "4096",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "McpServerTaskRoleB19E5A08",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/scoutsuite-mcpTaskDef/Resource"
   }
  },
  "scoutsuitemcpLogGroupE156C9EA": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/ecs/scoutsuite-mcp",
    "RetentionInDays": 7
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/scoutsuite-mcpLogGroup/Resource"
   }
  },
  "pacumcpExecutionRole7CCD7D4B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/pacu-mcpExecutionRole/Resource"
   }
  },
  "pacumcpExecutionRoleDefaultPolicy9E5D977D": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetAuthorizationToken",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:ecr:us-west-2:909507831547:repository/pacu-mcp"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "pacumcpLogGroupAB4093EB",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "pacumcpExecutionRoleDefaultPolicy9E5D977D",
    "Roles": [
     {
      "Ref": "pacumcpExecutionRole7CCD7D4B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/pacu-mcpExecutionRole/DefaultPolicy/Resource"
   }
  },
  "pacumcpTaskDef015493B9": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "AWS_REGION",
        "Value": "us-west-2"
       },
       {
        "Name": "S3_ARTIFACTS_BUCKET",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefArtifactsBucket2AAC55442DB5E6C9"
        }
       },
       {
        "Name": "DYNAMODB_TOOL_RESULTS_TABLE",
        "Value": {
         "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefToolResultsTable82CE91FE867ADBA2"
        }
       },
       {
        "Name": "TOOL_NAME",
        "Value": "pacu-mcp"
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Join": [
        "",
        [
         "909507831547.dkr.ecr.us-west-2.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/pacu-mcp:latest"
        ]
       ]
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "pacumcpLogGroupAB4093EB"
        },
        "awslogs-stream-prefix": "pacu-mcp",
        "awslogs-region": "us-west-2"
       }
      },
      "Name": "pacu-mcp"
     }
    ],
    "Cpu": "2048",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "pacumcpExecutionRole7CCD7D4B",
      "Arn"
     ]
    },
    "Family": "hivemind-pacu-mcp",
    "Memory": "4096",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "McpServerTaskRoleB19E5A08",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/pacu-mcpTaskDef/Resource"
   }
  },
  "pacumcpLogGroupAB4093EB": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/ecs/pacu-mcp",
    "RetentionInDays": 7
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/pacu-mcpLogGroup/Resource"
   }
  },
  "UnpackLambdaSecurityGroup6A180B17": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function HivemindPrismComputeUnpackLambdaBFE930D9",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": {
     "Fn::ImportValue": "HivemindPrism-Network:ExportsOutputRefHivemindVpc63A10AFB0D723A0E"
    }
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/UnpackLambda/SecurityGroup/Resource"
   }
  },
  "UnpackLambdaA542CFF8": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-909507831547-us-west-2",
     "S3Key": "15fb2042a81057a6655b62fdab459d24472c9397078386fa90c938719b85e706.zip"
    },
    "Environment": {
     "Variables": {
      "UPLOADS_BUCKET": {
       "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"
      },
      "ARTIFACTS_BUCKET": {
       "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefArtifactsBucket2AAC55442DB5E6C9"
      },
      "MISSION_TABLE": {
       "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefMissionStatusTable4039F7D7C921D396"
      }
     }
    },
    "FunctionName": "HivemindUnpackAndValidate",
    "Handler": "index.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "UnpackLambdaRoleCC4ECDC5",
      "Arn"
     ]
    },
    "Runtime": "python3.12",
    "Timeout": 300,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "UnpackLambdaSecurityGroup6A180B17",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Fn::ImportValue": "HivemindPrism-Network:ExportsOutputRefHivemindVpcPrivateSubnet1Subnet5BE540C434344ABF"
      },
      {
       "Fn::ImportValue": "HivemindPrism-Network:ExportsOutputRefHivemindVpcPrivateSubnet2Subnet3DF9DED022A86747"
      }
     ]
    }
   },
   "DependsOn": [
    "UnpackLambdaRoleDefaultPolicy1DBA011B",
    "UnpackLambdaRoleCC4ECDC5"
   ],
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/UnpackLambda/Resource",
    "aws:asset:path": "asset.15fb2042a81057a6655b62fdab459d24472c9397078386fa90c938719b85e706",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "UnpackLambdaLogRetention769C54C0": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "UnpackLambdaA542CFF8"
       }
      ]
     ]
    },
    "RetentionInDays": 7
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/UnpackLambda/LogRetention/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:DeleteRetentionPolicy",
        "logs:PutRetentionPolicy"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
    "Roles": [
     {
      "Ref": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Handler": "index.handler",
    "Runtime": "nodejs22.x",
    "Timeout": 900,
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-909507831547-us-west-2",
     "S3Key": "2819175352ad1ce0dae768e83fc328fb70fb5f10b4a8ff0ccbcb791f02b0716d.zip"
    },
    "Role": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"
   ],
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource",
    "aws:asset:path": "asset.2819175352ad1ce0dae768e83fc328fb70fb5f10b4a8ff0ccbcb791f02b0716d",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "MemoryIngestorLambdaSecurityGroup14A25DDD": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function HivemindPrismComputeMemoryIngestorLambda3781C584",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": {
     "Fn::ImportValue": "HivemindPrism-Network:ExportsOutputRefHivemindVpc63A10AFB0D723A0E"
    }
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/MemoryIngestorLambda/SecurityGroup/Resource"
   }
  },
  "MemoryIngestorLambda8D4E08AD": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-909507831547-us-west-2",
     "S3Key": "bfa9408fefe293b92a9a857f027929bc36bbc928c636a1cce422a2b350244539.zip"
    },
    "Environment": {
     "Variables": {
      "FINDINGS_TABLE": {
       "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefFindingsArchiveTable557F1EE361AAD2FC"
      },
      "KENDRA_BUCKET": {
       "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefKendraBucket8BF6269392D44149"
      },
      "KENDRA_INDEX_ID": {
       "Fn::ImportValue": "HivemindPrism-Intelligence:ExportsOutputFnGetAttInstitutionalMemoryIndexId7D0FD2EE"
      }
     }
    },
    "FunctionName": "HivemindMemoryIngestor",
    "Handler": "index.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "MemoryIngestorLambdaRole2E29E0F0",
      "Arn"
     ]
    },
    "Runtime": "python3.12",
    "Timeout": 120,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "MemoryIngestorLambdaSecurityGroup14A25DDD",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Fn::ImportValue": "HivemindPrism-Network:ExportsOutputRefHivemindVpcPrivateSubnet1Subnet5BE540C434344ABF"
      },
      {
       "Fn::ImportValue": "HivemindPrism-Network:ExportsOutputRefHivemindVpcPrivateSubnet2Subnet3DF9DED022A86747"
      }
     ]
    }
   },
   "DependsOn": [
    "MemoryIngestorLambdaRoleDefaultPolicyCF82680F",
    "MemoryIngestorLambdaRole2E29E0F0"
   ],
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/MemoryIngestorLambda/Resource",
    "aws:asset:path": "asset.bfa9408fefe293b92a9a857f027929bc36bbc928c636a1cce422a2b350244539",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "MemoryIngestorLambdaLogRetention261C0ED5": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "MemoryIngestorLambda8D4E08AD"
       }
      ]
     ]
    },
    "RetentionInDays": 7
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/MemoryIngestorLambda/LogRetention/Resource"
   }
  },
  "FailureHandlerLambdaSecurityGroupCADB30EF": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function HivemindPrismComputeFailureHandlerLambda81E7153B",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": {
     "Fn::ImportValue": "HivemindPrism-Network:ExportsOutputRefHivemindVpc63A10AFB0D723A0E"
    }
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/FailureHandlerLambda/SecurityGroup/Resource"
   }
  },
  "FailureHandlerLambda9F818F09": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-909507831547-us-west-2",
     "S3Key": "3d99d2c6420993c422c4b611f72443de929c174d7e2e39f30395d7b7a907e060.zip"
    },
    "Environment": {
     "Variables": {
      "MISSION_TABLE": {
       "Fn::ImportValue": "HivemindPrism-Storage:ExportsOutputRefMissionStatusTable4039F7D7C921D396"
      }
     }
    },
    "FunctionName": "HivemindFailureHandler",
    "Handler": "index.handler",
    "MemorySize": 128,
    "Role": {
     "Fn::GetAtt": [
      "FailureHandlerLambdaRole13A21A6B",
      "Arn"
     ]
    },
    "Runtime": "python3.12",
    "Timeout": 60,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "FailureHandlerLambdaSecurityGroupCADB30EF",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Fn::ImportValue": "HivemindPrism-Network:ExportsOutputRefHivemindVpcPrivateSubnet1Subnet5BE540C434344ABF"
      },
      {
       "Fn::ImportValue": "HivemindPrism-Network:ExportsOutputRefHivemindVpcPrivateSubnet2Subnet3DF9DED022A86747"
      }
     ]
    }
   },
   "DependsOn": [
    "FailureHandlerLambdaRoleDefaultPolicy85083960",
    "FailureHandlerLambdaRole13A21A6B"
   ],
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/FailureHandlerLambda/Resource",
    "aws:asset:path": "asset.3d99d2c6420993c422c4b611f72443de929c174d7e2e39f30395d7b7a907e060",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "FailureHandlerLambdaLogRetention0309B06F": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "FailureHandlerLambda9F818F09"
       }
      ]
     ]
    },
    "RetentionInDays": 7
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/FailureHandlerLambda/LogRetention/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/2WQQW/CMAyFfwv34LFy2RU6sQvSUNkdmdRUpiWpYgdURf3vU4pg2nZ6z5/1/CQXUBQLWMzwJnNbt/OOj5D2irY1eJNDYrxAqnxHpjy5SXe+Yzvk8e5GQ1YglV0UpZD5f1tij5Z12AV/5ZrCSsRbRmXvxGwwNKj0hdK+04kdZ5zDf4l3iuwo/LDcHaCi3gurD8MahUznG4G09c1H8LHPh55+65uKlNw92+HlWCOkTXT20fnwo5HlAUVIBVZZjCxhHW1LOpWQLSDtycbAOjyLfoFxNBWJj8GSmU7sFRt2zfTJx6I8uc+ofdTROF8TnOXl+voGxQKK2VmY5yE65QtBdddvrHugbLABAAA="
   },
   "Metadata": {
    "aws:cdk:path": "HivemindPrism-Compute/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "EcsClusterName": {
   "Description": "ECS Cluster name",
   "Value": {
    "Ref": "HivemindCluster94255979"
   },
   "Export": {
    "Name": "HivemindPrism-EcsCluster"
   }
  },
  "UnpackLambdaArn": {
   "Description": "Unpack Lambda ARN",
   "Value": {
    "Fn::GetAtt": [
     "UnpackLambdaA542CFF8",
     "Arn"
    ]
   }
  },
  "ExportsOutputFnGetAttUnpackLambdaA542CFF8Arn3B0FFFD3": {
   "Value": {
    "Fn::GetAtt": [
     "UnpackLambdaA542CFF8",
     "Arn"
    ]
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputFnGetAttUnpackLambdaA542CFF8Arn3B0FFFD3"
   }
  },
  "ExportsOutputRefcoordinatorTaskDefD6FC88DD67855FC0": {
   "Value": {
    "Ref": "coordinatorTaskDefD6FC88DD"
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputRefcoordinatorTaskDefD6FC88DD67855FC0"
   }
  },
  "ExportsOutputRefstrategistTaskDef40F5F6096E9DBBB0": {
   "Value": {
    "Ref": "strategistTaskDef40F5F609"
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputRefstrategistTaskDef40F5F6096E9DBBB0"
   }
  },
  "ExportsOutputRefarchaeologistTaskDef0C0F4ADA4DC35875": {
   "Value": {
    "Ref": "archaeologistTaskDef0C0F4ADA"
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputRefarchaeologistTaskDef0C0F4ADA4DC35875"
   }
  },
  "ExportsOutputRefsynthesizerTaskDef22D2EEBC35D6B5CC": {
   "Value": {
    "Ref": "synthesizerTaskDef22D2EEBC"
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputRefsynthesizerTaskDef22D2EEBC35D6B5CC"
   }
  },
  "ExportsOutputRefcriticTaskDef3B08E328D2B42F4C": {
   "Value": {
    "Ref": "criticTaskDef3B08E328"
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputRefcriticTaskDef3B08E328D2B42F4C"
   }
  },
  "ExportsOutputRefarchivistTaskDef1B10769189C15DAF": {
   "Value": {
    "Ref": "archivistTaskDef1B107691"
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputRefarchivistTaskDef1B10769189C15DAF"
   }
  },
  "ExportsOutputFnGetAttArchaeologistTaskRole8B61F93DArn724F520B": {
   "Value": {
    "Fn::GetAtt": [
     "ArchaeologistTaskRole8B61F93D",
     "Arn"
    ]
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputFnGetAttArchaeologistTaskRole8B61F93DArn724F520B"
   }
  },
  "ExportsOutputFnGetAttStrategistTaskRole541CBCB4Arn97D1F2E4": {
   "Value": {
    "Fn::GetAtt": [
     "StrategistTaskRole541CBCB4",
     "Arn"
    ]
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputFnGetAttStrategistTaskRole541CBCB4Arn97D1F2E4"
   }
  },
  "ExportsOutputFnGetAttCoordinatorTaskRole9462B0FAArn5330578F": {
   "Value": {
    "Fn::GetAtt": [
     "CoordinatorTaskRole9462B0FA",
     "Arn"
    ]
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputFnGetAttCoordinatorTaskRole9462B0FAArn5330578F"
   }
  },
  "ExportsOutputFnGetAttSynthesizerTaskRole69378926ArnBC79DC0F": {
   "Value": {
    "Fn::GetAtt": [
     "SynthesizerTaskRole69378926",
     "Arn"
    ]
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputFnGetAttSynthesizerTaskRole69378926ArnBC79DC0F"
   }
  },
  "ExportsOutputFnGetAttCriticTaskRoleCAC1AFB2Arn6FE7F62A": {
   "Value": {
    "Fn::GetAtt": [
     "CriticTaskRoleCAC1AFB2",
     "Arn"
    ]
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputFnGetAttCriticTaskRoleCAC1AFB2Arn6FE7F62A"
   }
  },
  "ExportsOutputFnGetAttArchivistTaskRoleEE36BB64Arn77DF6974": {
   "Value": {
    "Fn::GetAtt": [
     "ArchivistTaskRoleEE36BB64",
     "Arn"
    ]
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputFnGetAttArchivistTaskRoleEE36BB64Arn77DF6974"
   }
  },
  "ExportsOutputFnGetAttarchaeologistExecutionRoleE7945B2BArnCAEC5042": {
   "Value": {
    "Fn::GetAtt": [
     "archaeologistExecutionRoleE7945B2B",
     "Arn"
    ]
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputFnGetAttarchaeologistExecutionRoleE7945B2BArnCAEC5042"
   }
  },
  "ExportsOutputFnGetAttstrategistExecutionRole47F607FBArn74D02AA8": {
   "Value": {
    "Fn::GetAtt": [
     "strategistExecutionRole47F607FB",
     "Arn"
    ]
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputFnGetAttstrategistExecutionRole47F607FBArn74D02AA8"
   }
  },
  "ExportsOutputFnGetAttcoordinatorExecutionRoleEBF9EEF6Arn1213E3EF": {
   "Value": {
    "Fn::GetAtt": [
     "coordinatorExecutionRoleEBF9EEF6",
     "Arn"
    ]
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputFnGetAttcoordinatorExecutionRoleEBF9EEF6Arn1213E3EF"
   }
  },
  "ExportsOutputFnGetAttsynthesizerExecutionRoleCB81EBADArn618B8CB0": {
   "Value": {
    "Fn::GetAtt": [
     "synthesizerExecutionRoleCB81EBAD",
     "Arn"
    ]
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputFnGetAttsynthesizerExecutionRoleCB81EBADArn618B8CB0"
   }
  },
  "ExportsOutputFnGetAttcriticExecutionRole5F426FC7Arn9919F376": {
   "Value": {
    "Fn::GetAtt": [
     "criticExecutionRole5F426FC7",
     "Arn"
    ]
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputFnGetAttcriticExecutionRole5F426FC7Arn9919F376"
   }
  },
  "ExportsOutputFnGetAttarchivistExecutionRole522CA1A4Arn50372367": {
   "Value": {
    "Fn::GetAtt": [
     "archivistExecutionRole522CA1A4",
     "Arn"
    ]
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputFnGetAttarchivistExecutionRole522CA1A4Arn50372367"
   }
  },
  "ExportsOutputFnGetAttHivemindCluster94255979Arn66AE51A5": {
   "Value": {
    "Fn::GetAtt": [
     "HivemindCluster94255979",
     "Arn"
    ]
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputFnGetAttHivemindCluster94255979Arn66AE51A5"
   }
  },
  "ExportsOutputRefHivemindCluster9425597927C437AA": {
   "Value": {
    "Ref": "HivemindCluster94255979"
   },
   "Export": {
    "Name": "HivemindPrism-Compute:ExportsOutputRefHivemindCluster9425597927C437AA"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}